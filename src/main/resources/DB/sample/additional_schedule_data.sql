-- ========================================
-- Phoenix Cinema - 추가 상영시간 데이터
-- ========================================
--
-- 이 파일은 기본 상영시간 데이터(05_runtimes.sql)에 추가로
-- 더 많은 상영시간을 생성하여 시스템 테스트를 위한 데이터를 제공합니다.
--
-- 주의: 기존 데이터와 충돌하지 않도록 RUNTIME_ID는 49부터 시작합니다.
-- ========================================

INSERT INTO ROOMS (ROOM_ID, ROOM_NAME, TOTAL_SEATS)
VALUES (4, 'IMAX관', 100);
INSERT INTO ROOMS (ROOM_ID, ROOM_NAME, TOTAL_SEATS)
VALUES (5, 'PR관', 50);


-- 기존 상영시간 데이터 확인
SELECT '현재 상영시간 데이터 확인' as "상태" FROM DUAL;
SELECT
    '기존 런타임 ID 범위: ' || MIN(RUNTIME_ID) || ' ~ ' || MAX(RUNTIME_ID) as "정보",
    '총 ' || COUNT(*) || '건' as "건수"
FROM RUNTIMES;

-- 추가 상영시간 데이터 삽입 (RUNTIME_ID 49부터 시작)
-- 오늘 추가 상영시간

-- 인사이드 아웃 2 (MOVIE_ID=1) 추가 상영시간
INSERT INTO RUNTIMES (RUNTIME_ID, MOVIE_ID, ROOM_ID, RUN_DATE, START_TIME, PRICE, AVAILABLE_SEATS)
VALUES (49, 1, 2, SYSDATE, '12:15', 12000, 80);
INSERT INTO RUNTIMES (RUNTIME_ID, MOVIE_ID, ROOM_ID, RUN_DATE, START_TIME, PRICE, AVAILABLE_SEATS)
VALUES (50, 1, 3, SYSDATE, '20:00', 15000, 100);
INSERT INTO RUNTIMES (RUNTIME_ID, MOVIE_ID, ROOM_ID, RUN_DATE, START_TIME, PRICE, AVAILABLE_SEATS)
VALUES (51, 1, 4, SYSDATE, '16:15', 14000, 50);
INSERT INTO RUNTIMES (RUNTIME_ID, MOVIE_ID, ROOM_ID, RUN_DATE, START_TIME, PRICE, AVAILABLE_SEATS)
VALUES (52, 1, 5, SYSDATE, '13:45', 16000, 30);

-- 디스피커블 미 4 (MOVIE_ID=2) 추가 상영시간
INSERT INTO RUNTIMES (RUNTIME_ID, MOVIE_ID, ROOM_ID, RUN_DATE, START_TIME, PRICE, AVAILABLE_SEATS)
VALUES (53, 2, 1, SYSDATE, '15:30', 12000, 60);
INSERT INTO RUNTIMES (RUNTIME_ID, MOVIE_ID, ROOM_ID, RUN_DATE, START_TIME, PRICE, AVAILABLE_SEATS)
VALUES (54, 2, 3, SYSDATE, '12:45', 15000, 100);
INSERT INTO RUNTIMES (RUNTIME_ID, MOVIE_ID, ROOM_ID, RUN_DATE, START_TIME, PRICE, AVAILABLE_SEATS)
VALUES (55, 2, 5, SYSDATE, '18:30', 16000, 30);

-- 탈주 (MOVIE_ID=3) 추가 상영시간
INSERT INTO RUNTIMES (RUNTIME_ID, MOVIE_ID, ROOM_ID, RUN_DATE, START_TIME, PRICE, AVAILABLE_SEATS)
VALUES (56, 3, 1, SYSDATE, '11:30', 12000, 60);
INSERT INTO RUNTIMES (RUNTIME_ID, MOVIE_ID, ROOM_ID, RUN_DATE, START_TIME, PRICE, AVAILABLE_SEATS)
VALUES (57, 3, 4, SYSDATE, '14:20', 14000, 50);
INSERT INTO RUNTIMES (RUNTIME_ID, MOVIE_ID, ROOM_ID, RUN_DATE, START_TIME, PRICE, AVAILABLE_SEATS)
VALUES (58, 3, 5, SYSDATE, '22:15', 16000, 30);

-- 파일럿 (MOVIE_ID=4) 추가 상영시간
INSERT INTO RUNTIMES (RUNTIME_ID, MOVIE_ID, ROOM_ID, RUN_DATE, START_TIME, PRICE, AVAILABLE_SEATS)
VALUES (59, 4, 3, SYSDATE, '11:15', 15000, 100);
INSERT INTO RUNTIMES (RUNTIME_ID, MOVIE_ID, ROOM_ID, RUN_DATE, START_TIME, PRICE, AVAILABLE_SEATS)
VALUES (60, 4, 5, SYSDATE, '17:45', 16000, 30);

-- 트위스터스 (MOVIE_ID=5) 추가 상영시간
INSERT INTO RUNTIMES (RUNTIME_ID, MOVIE_ID, ROOM_ID, RUN_DATE, START_TIME, PRICE, AVAILABLE_SEATS)
VALUES (61, 5, 1, SYSDATE, '17:15', 12000, 60);
INSERT INTO RUNTIMES (RUNTIME_ID, MOVIE_ID, ROOM_ID, RUN_DATE, START_TIME, PRICE, AVAILABLE_SEATS)
VALUES (62, 5, 4, SYSDATE, '13:30', 14000, 50);

-- 헤드리거 (MOVIE_ID=6) 추가 상영시간
INSERT INTO RUNTIMES (RUNTIME_ID, MOVIE_ID, ROOM_ID, RUN_DATE, START_TIME, PRICE, AVAILABLE_SEATS)
VALUES (63, 6, 2, SYSDATE, '10:45', 12000, 80);
INSERT INTO RUNTIMES (RUNTIME_ID, MOVIE_ID, ROOM_ID, RUN_DATE, START_TIME, PRICE, AVAILABLE_SEATS)
VALUES (64, 6, 5, SYSDATE, '19:00', 16000, 30);

-- 내일 추가 상영시간
INSERT INTO RUNTIMES (RUNTIME_ID, MOVIE_ID, ROOM_ID, RUN_DATE, START_TIME, PRICE, AVAILABLE_SEATS)
VALUES (65, 1, 4, SYSDATE + 1, '09:45', 14000, 50);
INSERT INTO RUNTIMES (RUNTIME_ID, MOVIE_ID, ROOM_ID, RUN_DATE, START_TIME, PRICE, AVAILABLE_SEATS)
VALUES (66, 1, 5, SYSDATE + 1, '15:15', 16000, 30);
INSERT INTO RUNTIMES (RUNTIME_ID, MOVIE_ID, ROOM_ID, RUN_DATE, START_TIME, PRICE, AVAILABLE_SEATS)
VALUES (67, 1, 2, SYSDATE + 1, '22:00', 12000, 80);

INSERT INTO RUNTIMES (RUNTIME_ID, MOVIE_ID, ROOM_ID, RUN_DATE, START_TIME, PRICE, AVAILABLE_SEATS)
VALUES (68, 2, 3, SYSDATE + 1, '13:30', 15000, 100);
INSERT INTO RUNTIMES (RUNTIME_ID, MOVIE_ID, ROOM_ID, RUN_DATE, START_TIME, PRICE, AVAILABLE_SEATS)
VALUES (69, 2, 5, SYSDATE + 1, '20:15', 16000, 30);

INSERT INTO RUNTIMES (RUNTIME_ID, MOVIE_ID, ROOM_ID, RUN_DATE, START_TIME, PRICE, AVAILABLE_SEATS)
VALUES (70, 3, 4, SYSDATE + 1, '11:45', 14000, 50);
INSERT INTO RUNTIMES (RUNTIME_ID, MOVIE_ID, ROOM_ID, RUN_DATE, START_TIME, PRICE, AVAILABLE_SEATS)
VALUES (71, 3, 1, SYSDATE + 1, '17:30', 12000, 60);

INSERT INTO RUNTIMES (RUNTIME_ID, MOVIE_ID, ROOM_ID, RUN_DATE, START_TIME, PRICE, AVAILABLE_SEATS)
VALUES (72, 4, 2, SYSDATE + 1, '14:45', 12000, 80);
INSERT INTO RUNTIMES (RUNTIME_ID, MOVIE_ID, ROOM_ID, RUN_DATE, START_TIME, PRICE, AVAILABLE_SEATS)
VALUES (73, 4, 3, SYSDATE + 1, '19:30', 15000, 100);

INSERT INTO RUNTIMES (RUNTIME_ID, MOVIE_ID, ROOM_ID, RUN_DATE, START_TIME, PRICE, AVAILABLE_SEATS)
VALUES (74, 5, 5, SYSDATE + 1, '16:00', 16000, 30);
INSERT INTO RUNTIMES (RUNTIME_ID, MOVIE_ID, ROOM_ID, RUN_DATE, START_TIME, PRICE, AVAILABLE_SEATS)
VALUES (75, 5, 1, SYSDATE + 1, '21:45', 12000, 60);

INSERT INTO RUNTIMES (RUNTIME_ID, MOVIE_ID, ROOM_ID, RUN_DATE, START_TIME, PRICE, AVAILABLE_SEATS)
VALUES (76, 6, 4, SYSDATE + 1, '10:30', 14000, 50);
INSERT INTO RUNTIMES (RUNTIME_ID, MOVIE_ID, ROOM_ID, RUN_DATE, START_TIME, PRICE, AVAILABLE_SEATS)
VALUES (77, 6, 2, SYSDATE + 1, '18:15', 12000, 80);

-- 모레 추가 상영시간
INSERT INTO RUNTIMES (RUNTIME_ID, MOVIE_ID, ROOM_ID, RUN_DATE, START_TIME, PRICE, AVAILABLE_SEATS)
VALUES (78, 1, 1, SYSDATE + 2, '11:30', 12000, 60);
INSERT INTO RUNTIMES (RUNTIME_ID, MOVIE_ID, ROOM_ID, RUN_DATE, START_TIME, PRICE, AVAILABLE_SEATS)
VALUES (79, 1, 5, SYSDATE + 2, '17:45', 16000, 30);
INSERT INTO RUNTIMES (RUNTIME_ID, MOVIE_ID, ROOM_ID, RUN_DATE, START_TIME, PRICE, AVAILABLE_SEATS)
VALUES (80, 2, 4, SYSDATE + 2, '13:15', 14000, 50);
INSERT INTO RUNTIMES (RUNTIME_ID, MOVIE_ID, ROOM_ID, RUN_DATE, START_TIME, PRICE, AVAILABLE_SEATS)
VALUES (81, 3, 2, SYSDATE + 2, '19:30', 12000, 80);
INSERT INTO RUNTIMES (RUNTIME_ID, MOVIE_ID, ROOM_ID, RUN_DATE, START_TIME, PRICE, AVAILABLE_SEATS)
VALUES (82, 4, 3, SYSDATE + 2, '16:15', 15000, 100);
INSERT INTO RUNTIMES (RUNTIME_ID, MOVIE_ID, ROOM_ID, RUN_DATE, START_TIME, PRICE, AVAILABLE_SEATS)
VALUES (83, 5, 5, SYSDATE + 2, '21:00', 16000, 30);
INSERT INTO RUNTIMES (RUNTIME_ID, MOVIE_ID, ROOM_ID, RUN_DATE, START_TIME, PRICE, AVAILABLE_SEATS)
VALUES (84, 6, 1, SYSDATE + 2, '14:45', 12000, 60);

-- 3일 후 추가 상영시간
INSERT INTO RUNTIMES (RUNTIME_ID, MOVIE_ID, ROOM_ID, RUN_DATE, START_TIME, PRICE, AVAILABLE_SEATS)
VALUES (85, 1, 3, SYSDATE + 3, '12:00', 15000, 100);
INSERT INTO RUNTIMES (RUNTIME_ID, MOVIE_ID, ROOM_ID, RUN_DATE, START_TIME, PRICE, AVAILABLE_SEATS)
VALUES (86, 2, 1, SYSDATE + 3, '15:30', 12000, 60);
INSERT INTO RUNTIMES (RUNTIME_ID, MOVIE_ID, ROOM_ID, RUN_DATE, START_TIME, PRICE, AVAILABLE_SEATS)
VALUES (87, 3, 5, SYSDATE + 3, '18:45', 16000, 30);
INSERT INTO RUNTIMES (RUNTIME_ID, MOVIE_ID, ROOM_ID, RUN_DATE, START_TIME, PRICE, AVAILABLE_SEATS)
VALUES (88, 4, 2, SYSDATE + 3, '20:30', 12000, 80);
INSERT INTO RUNTIMES (RUNTIME_ID, MOVIE_ID, ROOM_ID, RUN_DATE, START_TIME, PRICE, AVAILABLE_SEATS)
VALUES (89, 5, 4, SYSDATE + 3, '11:15', 14000, 50);
INSERT INTO RUNTIMES (RUNTIME_ID, MOVIE_ID, ROOM_ID, RUN_DATE, START_TIME, PRICE, AVAILABLE_SEATS)
VALUES (90, 6, 3, SYSDATE + 3, '16:45', 15000, 100);

-- 4일 후 추가 상영시간
INSERT INTO RUNTIMES (RUNTIME_ID, MOVIE_ID, ROOM_ID, RUN_DATE, START_TIME, PRICE, AVAILABLE_SEATS)
VALUES (91, 1, 2, SYSDATE + 4, '13:30', 12000, 80);
INSERT INTO RUNTIMES (RUNTIME_ID, MOVIE_ID, ROOM_ID, RUN_DATE, START_TIME, PRICE, AVAILABLE_SEATS)
VALUES (92, 2, 4, SYSDATE + 4, '17:00', 14000, 50);
INSERT INTO RUNTIMES (RUNTIME_ID, MOVIE_ID, ROOM_ID, RUN_DATE, START_TIME, PRICE, AVAILABLE_SEATS)
VALUES (93, 3, 1, SYSDATE + 4, '19:15', 12000, 60);
INSERT INTO RUNTIMES (RUNTIME_ID, MOVIE_ID, ROOM_ID, RUN_DATE, START_TIME, PRICE, AVAILABLE_SEATS)
VALUES (94, 4, 5, SYSDATE + 4, '21:30', 16000, 30);
INSERT INTO RUNTIMES (RUNTIME_ID, MOVIE_ID, ROOM_ID, RUN_DATE, START_TIME, PRICE, AVAILABLE_SEATS)
VALUES (95, 5, 3, SYSDATE + 4, '14:15', 15000, 100);
INSERT INTO RUNTIMES (RUNTIME_ID, MOVIE_ID, ROOM_ID, RUN_DATE, START_TIME, PRICE, AVAILABLE_SEATS)
VALUES (96, 6, 2, SYSDATE + 4, '10:45', 12000, 80);

-- 5일 후 (주말) 추가 상영시간
INSERT INTO RUNTIMES (RUNTIME_ID, MOVIE_ID, ROOM_ID, RUN_DATE, START_TIME, PRICE, AVAILABLE_SEATS)
VALUES (97, 1, 4, SYSDATE + 5, '09:30', 14000, 50);
INSERT INTO RUNTIMES (RUNTIME_ID, MOVIE_ID, ROOM_ID, RUN_DATE, START_TIME, PRICE, AVAILABLE_SEATS)
VALUES (98, 1, 5, SYSDATE + 5, '12:15', 16000, 30);
INSERT INTO RUNTIMES (RUNTIME_ID, MOVIE_ID, ROOM_ID, RUN_DATE, START_TIME, PRICE, AVAILABLE_SEATS)
VALUES (99, 1, 1, SYSDATE + 5, '18:00', 12000, 60);
INSERT INTO RUNTIMES (RUNTIME_ID, MOVIE_ID, ROOM_ID, RUN_DATE, START_TIME, PRICE, AVAILABLE_SEATS)
VALUES (100, 1, 3, SYSDATE + 5, '21:45', 15000, 100);

INSERT INTO RUNTIMES (RUNTIME_ID, MOVIE_ID, ROOM_ID, RUN_DATE, START_TIME, PRICE, AVAILABLE_SEATS)
VALUES (101, 2, 2, SYSDATE + 5, '10:00', 12000, 80);
INSERT INTO RUNTIMES (RUNTIME_ID, MOVIE_ID, ROOM_ID, RUN_DATE, START_TIME, PRICE, AVAILABLE_SEATS)
VALUES (102, 2, 4, SYSDATE + 5, '13:45', 14000, 50);
INSERT INTO RUNTIMES (RUNTIME_ID, MOVIE_ID, ROOM_ID, RUN_DATE, START_TIME, PRICE, AVAILABLE_SEATS)
VALUES (103, 2, 5, SYSDATE + 5, '19:30', 16000, 30);

INSERT INTO RUNTIMES (RUNTIME_ID, MOVIE_ID, ROOM_ID, RUN_DATE, START_TIME, PRICE, AVAILABLE_SEATS)
VALUES (104, 3, 3, SYSDATE + 5, '11:30', 15000, 100);
INSERT INTO RUNTIMES (RUNTIME_ID, MOVIE_ID, ROOM_ID, RUN_DATE, START_TIME, PRICE, AVAILABLE_SEATS)
VALUES (105, 3, 1, SYSDATE + 5, '16:15', 12000, 60);
INSERT INTO RUNTIMES (RUNTIME_ID, MOVIE_ID, ROOM_ID, RUN_DATE, START_TIME, PRICE, AVAILABLE_SEATS)
VALUES (106, 3, 4, SYSDATE + 5, '22:00', 14000, 50);

INSERT INTO RUNTIMES (RUNTIME_ID, MOVIE_ID, ROOM_ID, RUN_DATE, START_TIME, PRICE, AVAILABLE_SEATS)
VALUES (107, 4, 2, SYSDATE + 5, '14:30', 12000, 80);
INSERT INTO RUNTIMES (RUNTIME_ID, MOVIE_ID, ROOM_ID, RUN_DATE, START_TIME, PRICE, AVAILABLE_SEATS)
VALUES (108, 5, 5, SYSDATE + 5, '17:15', 16000, 30);
INSERT INTO RUNTIMES (RUNTIME_ID, MOVIE_ID, ROOM_ID, RUN_DATE, START_TIME, PRICE, AVAILABLE_SEATS)
VALUES (109, 6, 1, SYSDATE + 5, '20:45', 12000, 60);

-- 6일 후 (주말) 추가 상영시간
INSERT INTO RUNTIMES (RUNTIME_ID, MOVIE_ID, ROOM_ID, RUN_DATE, START_TIME, PRICE, AVAILABLE_SEATS)
VALUES (110, 1, 2, SYSDATE + 6, '09:15', 12000, 80);
INSERT INTO RUNTIMES (RUNTIME_ID, MOVIE_ID, ROOM_ID, RUN_DATE, START_TIME, PRICE, AVAILABLE_SEATS)
VALUES (111, 1, 4, SYSDATE + 6, '13:00', 14000, 50);
INSERT INTO RUNTIMES (RUNTIME_ID, MOVIE_ID, ROOM_ID, RUN_DATE, START_TIME, PRICE, AVAILABLE_SEATS)
VALUES (112, 1, 5, SYSDATE + 6, '17:30', 16000, 30);
INSERT INTO RUNTIMES (RUNTIME_ID, MOVIE_ID, ROOM_ID, RUN_DATE, START_TIME, PRICE, AVAILABLE_SEATS)
VALUES (113, 1, 3, SYSDATE + 6, '21:15', 15000, 100);

INSERT INTO RUNTIMES (RUNTIME_ID, MOVIE_ID, ROOM_ID, RUN_DATE, START_TIME, PRICE, AVAILABLE_SEATS)
VALUES (114, 2, 1, SYSDATE + 6, '10:30', 12000, 60);
INSERT INTO RUNTIMES (RUNTIME_ID, MOVIE_ID, ROOM_ID, RUN_DATE, START_TIME, PRICE, AVAILABLE_SEATS)
VALUES (115, 2, 3, SYSDATE + 6, '15:45', 15000, 100);
INSERT INTO RUNTIMES (RUNTIME_ID, MOVIE_ID, ROOM_ID, RUN_DATE, START_TIME, PRICE, AVAILABLE_SEATS)
VALUES (116, 2, 5, SYSDATE + 6, '19:00', 16000, 30);

INSERT INTO RUNTIMES (RUNTIME_ID, MOVIE_ID, ROOM_ID, RUN_DATE, START_TIME, PRICE, AVAILABLE_SEATS)
VALUES (117, 3, 2, SYSDATE + 6, '12:30', 12000, 80);
INSERT INTO RUNTIMES (RUNTIME_ID, MOVIE_ID, ROOM_ID, RUN_DATE, START_TIME, PRICE, AVAILABLE_SEATS)
VALUES (118, 3, 4, SYSDATE + 6, '18:15', 14000, 50);
INSERT INTO RUNTIMES (RUNTIME_ID, MOVIE_ID, ROOM_ID, RUN_DATE, START_TIME, PRICE, AVAILABLE_SEATS)
VALUES (119, 3, 1, SYSDATE + 6, '22:30', 12000, 60);

INSERT INTO RUNTIMES (RUNTIME_ID, MOVIE_ID, ROOM_ID, RUN_DATE, START_TIME, PRICE, AVAILABLE_SEATS)
VALUES (120, 4, 3, SYSDATE + 6, '11:00', 15000, 100);
INSERT INTO RUNTIMES (RUNTIME_ID, MOVIE_ID, ROOM_ID, RUN_DATE, START_TIME, PRICE, AVAILABLE_SEATS)
VALUES (121, 5, 2, SYSDATE + 6, '14:15', 12000, 80);
INSERT INTO RUNTIMES (RUNTIME_ID, MOVIE_ID, ROOM_ID, RUN_DATE, START_TIME, PRICE, AVAILABLE_SEATS)
VALUES (122, 6, 4, SYSDATE + 6, '16:45', 14000, 50);
INSERT INTO RUNTIMES (RUNTIME_ID, MOVIE_ID, ROOM_ID, RUN_DATE, START_TIME, PRICE, AVAILABLE_SEATS)
VALUES (123, 6, 5, SYSDATE + 6, '20:00', 16000, 30);

-- 커밋
COMMIT;

-- 추가 완료 확인
SELECT '추가 상영시간 데이터 삽입 완료' as "상태" FROM DUAL;

-- 최종 데이터 확인
SELECT
    '총 런타임 수: ' || COUNT(*) as "총계",
    '추가된 런타임 수: ' || (COUNT(*) - 48) as "추가분"
FROM RUNTIMES;

-- 날짜별 상영시간 분포 확인
SELECT
    TO_CHAR(RUN_DATE, 'YYYY-MM-DD') as "날짜",
    COUNT(*) as "상영횟수",
    COUNT(DISTINCT MOVIE_ID) as "영화수",
    COUNT(DISTINCT ROOM_ID) as "사용상영관수"
FROM RUNTIMES
GROUP BY RUN_DATE
ORDER BY RUN_DATE;

-- 영화별 상영시간 분포 확인
SELECT
    m.TITLE as "영화명",
    COUNT(r.RUNTIME_ID) as "상영횟수",
    COUNT(DISTINCT r.ROOM_ID) as "사용상영관수",
    COUNT(DISTINCT r.RUN_DATE) as "상영일수"
FROM MOVIES m
         LEFT JOIN RUNTIMES r ON m.MOVIE_ID = r.MOVIE_ID
GROUP BY m.MOVIE_ID, m.TITLE
ORDER BY COUNT(r.RUNTIME_ID) DESC;

-- 상영관별 이용률 확인
SELECT
    rm.ROOM_NAME as "상영관",
    COUNT(r.RUNTIME_ID) as "배정횟수",
    ROUND(AVG(r.AVAILABLE_SEATS), 1) as "평균잔여석",
    ROUND(AVG(rm.TOTAL_SEATS - r.AVAILABLE_SEATS), 1) as "평균판매석"
FROM ROOMS rm
         LEFT JOIN RUNTIMES r ON rm.ROOM_ID = r.ROOM_ID
GROUP BY rm.ROOM_ID, rm.ROOM_NAME, rm.TOTAL_SEATS
ORDER BY COUNT(r.RUNTIME_ID) DESC;